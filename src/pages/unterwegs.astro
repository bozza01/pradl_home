---
import BaseLayout from "../layouts/BaseLayout.astro";
import Breadcrumbs from "../components/Breadcrumbs.astro";
import Carousel from "../components/Carousel.astro";
import TripCard from "../components/TripCard.astro";
import fs from "fs";

function loadImages(folder) {
  const base = `/public/unterwegs/${folder}`;
  return fs.readdirSync("." + base)
    .filter(f => /\.(jpg|jpeg|png|webp)$/i.test(f))
    .sort()
    .map(f => `/unterwegs/${folder}/${f}`);
}

const latestTrip = {
  title: "Italien 2025 mit dem 911 Carrera S",
  text: "Herbst, Meran, Wein, Gardasee, Helloween.",
  images: loadImages("italien_2025")
};

const pastTrips = [
   { title: "Saalbach Silvester 2025",
   image: loadImages("saalbach_2025_2026")[0],
   href: "#" }, 
   
   { title: "Ägypten 2025",
   image: loadImages("aegypten_2025")[0],
  
   href: "#" } 
   ]; 
   ---

<BaseLayout
  title="Unterwegs – Familie Pradl"
  description="Reisen & Eindrücke der Familie Pradl"
>

<Breadcrumbs items={[
  { label: "Start", href: "/" },
  { label: "Unterwegs" }
]} />

<section class="content">

  <h1>{latestTrip.title}</h1>
  <p>{latestTrip.text}</p>

  <Carousel images={latestTrip.images} />

  <h2>Weitere Reisen</h2>

  <div class="grid">
    {pastTrips.map(trip => (
      <TripCard {...trip} />
    ))}
  </div>

</section>

<style>
.grid {
  display: grid;
  gap: 2rem;
  margin-top: 2rem;
}

@media(min-width:700px){
  .grid {
    grid-template-columns: repeat(2,1fr);
  }
}
</style>

</BaseLayout>